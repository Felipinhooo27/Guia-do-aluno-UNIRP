<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guia do Aluno UNIRP</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class'
        }
    </script>
    <!-- Fontes -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap');
        body { font-family: 'Roboto', sans-serif; }
        
        /* Remove setas dos inputs number */
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { 
            -webkit-appearance: none; 
            margin: 0; 
        }
        input[type=number] {
            -moz-appearance: textfield;
        }

        /* Anima√ß√£o de Confete */
        @keyframes confetti-fall {
            0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }
        .confetti {
            position: fixed;
            top: 0;
            left: 50%;
            width: 10px;
            height: 10px;
            background-color: #f00;
            animation: confetti-fall 4s linear infinite;
            z-index: 50;
            pointer-events: none;
        }
        .confetti:nth-child(2n) { background-color: #0f0; animation-duration: 3s; left: 20%; }
        .confetti:nth-child(3n) { background-color: #00f; animation-duration: 5s; left: 80%; }
        .confetti:nth-child(4n) { background-color: #ff0; animation-duration: 3.5s; left: 40%; }
        .confetti:nth-child(5n) { background-color: #0ff; animation-duration: 4.5s; left: 60%; }
        .confetti:nth-child(6n) { background-color: #f0f; animation-duration: 3.2s; left: 10%; }
        .confetti:nth-child(7n) { background-color: #0ff; animation-duration: 4.8s; left: 90%; }
        .confetti:nth-child(8n) { background-color: #ff0; animation-duration: 3.7s; left: 30%; }
        .confetti:nth-child(9n) { background-color: #0f0; animation-duration: 4.2s; left: 70%; }
        .confetti-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        .confetti-container.active {
            display: block;
        }

        /* Transi√ß√µes de Tab */
        .tab-content {
            display: none;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        .tab-content.active {
            display: block;
            opacity: 1;
        }

        /* Anima√ß√£o de Entrada de Card */
        @keyframes slide-up-fade {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .card-enter {
            animation: slide-up-fade 0.4s ease-out forwards;
        }

        /* Transi√ß√£o suave para dark mode */
        *, *::before, *::after {
            transition: background-color 0.3s ease, border-color 0.3s ease, color 0.2s ease;
        }

        /* Scrollbar customizada para dark mode */
        .dark ::-webkit-scrollbar {
            width: 8px;
        }
        .dark ::-webkit-scrollbar-track {
            background: #1f2937;
        }
        .dark ::-webkit-scrollbar-thumb {
            background: #4b5563;
            border-radius: 4px;
        }
        .dark ::-webkit-scrollbar-thumb:hover {
            background: #6b7280;
        }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 min-h-screen flex flex-col items-center font-sans">

    <!-- Confetti Container -->
    <div id="confetti-container" class="confetti-container">
        <!-- Aumentada a quantidade de confetes -->
        <div class="confetti"></div><div class="confetti"></div><div class="confetti"></div><div class="confetti"></div><div class="confetti"></div>
        <div class="confetti"></div><div class="confetti"></div><div class="confetti"></div><div class="confetti"></div><div class="confetti"></div>
        <div class="confetti"></div><div class="confetti"></div><div class="confetti"></div><div class="confetti"></div><div class="confetti"></div>
        <div class="confetti"></div><div class="confetti"></div><div class="confetti"></div><div class="confetti"></div><div class="confetti"></div>
        <div class="confetti"></div><div class="confetti"></div><div class="confetti"></div><div class="confetti"></div><div class="confetti"></div>
        <div class="confetti"></div><div class="confetti"></div><div class="confetti"></div><div class="confetti"></div><div class="confetti"></div>
    </div>

    <!-- Main Container -->
    <div class="w-full max-w-2xl px-3 sm:px-4 md:px-6 py-4 pb-8 flex-grow">
        
        <!-- Header / Logo -->
        <div class="relative bg-white dark:bg-gray-800 shadow-sm dark:shadow-gray-900/50 border-t-4 border-red-600 dark:border-red-500 mb-4 sm:mb-6 rounded-sm overflow-hidden p-6 flex flex-col items-center justify-center text-center">
            <!-- Dark Mode Toggle -->
            <button id="dark-mode-toggle"
                    class="absolute top-3 right-3 p-2 rounded-full bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors"
                    aria-label="Alternar modo escuro">
                <!-- √çcone Sol (mostrar quando dark mode ativo) -->
                <svg id="icon-sun" class="hidden dark:block h-5 w-5 text-yellow-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                </svg>
                <!-- √çcone Lua (mostrar quando light mode ativo) -->
                <svg id="icon-moon" class="block dark:hidden h-5 w-5 text-gray-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                </svg>
            </button>
            <h1 class="text-4xl md:text-5xl font-black text-red-600 dark:text-red-500 tracking-tighter" style="font-family: 'Arial Black', sans-serif;">GUIA DO ALUNO UNIRP</h1>
            <h2 class="text-xs md:text-sm font-bold text-red-600 dark:text-red-400 tracking-widest mt-2">CENTRO UNIVERSIT√ÅRIO DE RIO PRETO</h2>
        </div>

        <!-- Navega√ß√£o (Tabs) -->
        <div class="flex mb-4 bg-white dark:bg-gray-800 shadow-sm dark:shadow-gray-900/50 rounded-sm overflow-hidden">
            <button id="tab-notas" class="flex-1 py-3 px-4 text-center font-bold text-gray-700 dark:text-gray-200 bg-gray-50 dark:bg-gray-700 border-b-2 border-red-600 dark:border-red-500 focus:outline-none transition-colors">
                Notas
            </button>
            <button id="tab-faltas" class="flex-1 py-3 px-4 text-center font-bold text-gray-500 dark:text-gray-400 border-b-2 border-transparent hover:text-gray-700 dark:hover:text-gray-200 focus:outline-none transition-colors">
                Faltas
            </button>
        </div>

        <!-- Conte√∫do da Aba: Notas -->
        <div id="content-notas" class="tab-content active bg-white dark:bg-gray-800 shadow-md dark:shadow-gray-900/50 border border-gray-300 dark:border-gray-600 rounded-sm overflow-hidden card-enter">
            <div class="bg-gray-50 dark:bg-gray-700 p-4 border-b border-gray-300 dark:border-gray-600 flex justify-between items-center">
                <h2 class="font-bold text-gray-700 dark:text-gray-200 text-lg flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-red-600 dark:text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z" /></svg>
                    Calculadora de Notas
                </h2>
                <div class="text-xs text-gray-500 dark:text-gray-400 font-medium px-2 py-1 bg-gray-200 dark:bg-gray-600 rounded">2025/2</div>
            </div>

            <div class="p-6">
                <!-- Info Meta -->
                <div class="bg-red-50 dark:bg-red-900/30 p-3 font-bold text-gray-700 dark:text-gray-200 text-sm mb-6 border-l-4 border-red-600 dark:border-red-500 flex justify-between items-center rounded-r-sm shadow-sm">
                    <span class="flex items-center"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2 text-red-600 dark:text-red-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>Notas da Disciplina</span>
                    <span class="text-xs font-bold text-red-800 dark:text-red-200 bg-red-100 dark:bg-red-900/50 px-3 py-1 rounded-full border border-red-200 dark:border-red-700">
                        Meta: 6,51
                    </span>
                </div>

                <!-- Inputs de Notas -->
                <div class="space-y-4">
                    <!-- Intermedi√°ria -->
                    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2 sm:gap-0 p-3 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md shadow-sm hover:border-red-300 dark:hover:border-red-500 transition-colors">
                        <label class="text-base font-bold text-red-700 dark:text-red-400 capitalize flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-gray-400 dark:text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                            Intermedi√°ria <span class="text-gray-400 dark:text-gray-500 text-xs font-normal ml-1">(peso: 3.50)</span>
                        </label>
                        <input type="number" id="input-inter" data-weight="3.5" class="grade-input w-full sm:w-24 text-center text-lg font-bold py-2 sm:py-1 px-3 sm:px-2 rounded border focus:outline-none focus:ring-2 focus:ring-red-500 transition-all bg-white dark:bg-gray-600 text-gray-400 dark:text-gray-300 border-gray-300 dark:border-gray-500 placeholder-gray-300 dark:placeholder-gray-500 border-dashed" placeholder="0.00">
                    </div>
                    <!-- Semestral -->
                    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2 sm:gap-0 p-3 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md shadow-sm hover:border-red-300 dark:hover:border-red-500 transition-colors">
                        <label class="text-base font-bold text-red-700 dark:text-red-400 capitalize flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-gray-400 dark:text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>
                            Semestral <span class="text-gray-400 dark:text-gray-500 text-xs font-normal ml-1">(peso: 3.50)</span>
                        </label>
                        <input type="number" id="input-semes" data-weight="3.5" class="grade-input w-full sm:w-24 text-center text-lg font-bold py-2 sm:py-1 px-3 sm:px-2 rounded border focus:outline-none focus:ring-2 focus:ring-red-500 transition-all bg-white dark:bg-gray-600 text-gray-400 dark:text-gray-300 border-gray-300 dark:border-gray-500 placeholder-gray-300 dark:placeholder-gray-500 border-dashed" placeholder="0.00">
                    </div>
                    <!-- Trabalho -->
                    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2 sm:gap-0 p-3 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md shadow-sm hover:border-red-300 dark:hover:border-red-500 transition-colors">
                        <label class="text-base font-bold text-red-700 dark:text-red-400 capitalize flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-gray-400 dark:text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 002-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" /></svg>
                            Trabalho <span class="text-gray-400 dark:text-gray-500 text-xs font-normal ml-1">(peso: 3.00)</span>
                        </label>
                        <input type="number" id="input-trab" data-weight="3.0" class="grade-input w-full sm:w-24 text-center text-lg font-bold py-2 sm:py-1 px-3 sm:px-2 rounded border focus:outline-none focus:ring-2 focus:ring-red-500 transition-all bg-white dark:bg-gray-600 text-gray-400 dark:text-gray-300 border-gray-300 dark:border-gray-500 placeholder-gray-300 dark:placeholder-gray-500 border-dashed" placeholder="0.00">
                    </div>
                </div>

                <!-- Resultado Final -->
                <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 sm:gap-0 py-4 border-t-2 border-gray-100 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 mt-6 px-4 rounded-md shadow-sm">
                    <label class="text-lg font-black text-gray-800 dark:text-gray-100">M√âDIA PARCIAL</label>
                    <div id="display-total" class="w-full sm:w-28 text-center text-2xl font-bold py-2 px-2 rounded-md border shadow-sm bg-gray-200 dark:bg-gray-600 text-gray-500 dark:text-gray-300 transition-all duration-300">
                        0.00
                    </div>
                </div>

                <!-- Mensagem de Status da M√©dia -->
                <div id="media-status-message" class="mt-4 p-3 rounded-md text-sm font-bold text-center hidden card-enter"></div>

                <!-- Dica / Legend -->
                <div id="grade-hint" class="mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-700 rounded-md text-sm text-yellow-800 dark:text-yellow-200 flex items-start shadow-sm">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 flex-shrink-0 text-yellow-600 dark:text-yellow-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    <span>Os n√∫meros <strong>cinzas tracejados</strong> indicam quanto voc√™ precisa tirar para fechar com m√©dia 6,51.</span>
                </div>

                <!-- Informativo de Recupera√ß√£o -->
                <div id="recuperacao-info" class="mt-6 p-4 bg-red-50 dark:bg-red-900/30 border-l-4 border-red-600 dark:border-red-500 rounded-md shadow-sm hidden card-enter">
                    <h3 class="font-bold text-red-800 dark:text-red-200 text-lg mb-2 flex items-center"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" /></svg>Informativo de Recupera√ß√£o</h3>
                    <div class="space-y-3 text-sm text-red-700 dark:text-red-300">
                        <p>Sua m√©dia est√° abaixo de 6,51. Veja suas op√ß√µes:</p>
                        <div class="bg-white dark:bg-gray-700 p-3 rounded border border-red-200 dark:border-red-800">
                            <span class="font-bold block mb-1">üìù Prova Substitutiva (SUB)</span>
                            Substitui a sua <strong>menor nota</strong> (exceto Trabalho).<br>
                            Voc√™ precisa tirar: <strong id="nota-sub" class="text-lg text-red-800 dark:text-red-300">0.00</strong> na <span id="tipo-nota-sub" class="font-bold lowercase"></span>.
                        </div>
                        <div class="bg-white dark:bg-gray-700 p-3 rounded border border-red-200 dark:border-red-800">
                            <span class="font-bold block mb-1">üéì Exame Final - Gratuito</span>
                            A soma da sua M√©dia Parcial com a nota do Exame deve ser <strong>10</strong>.<br>
                            Voc√™ precisa tirar: <strong id="nota-exame" class="text-lg text-red-800 dark:text-red-300">0.00</strong>.
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <!-- Conte√∫do da Aba: Faltas -->
        <div id="content-faltas" class="tab-content bg-white dark:bg-gray-800 shadow-md dark:shadow-gray-900/50 border border-gray-300 dark:border-gray-600 rounded-sm overflow-hidden card-enter">
            <div class="bg-gray-50 dark:bg-gray-700 p-4 border-b border-gray-300 dark:border-gray-600 flex justify-between items-center">
                <h2 class="font-bold text-gray-700 dark:text-gray-200 text-lg flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-red-600 dark:text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                    Calculadora de Faltas
                </h2>
                <div class="text-xs text-gray-500 dark:text-gray-400 font-medium px-2 py-1 bg-gray-200 dark:bg-gray-600 rounded">2025/2</div>
            </div>

            <div class="p-6">
                <!-- Dica Faltas -->
                <div class="bg-yellow-50 dark:bg-yellow-900/30 p-3 border border-yellow-200 dark:border-yellow-700 rounded-md text-sm text-yellow-800 dark:text-yellow-200 flex items-start shadow-sm mb-6">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 flex-shrink-0 text-yellow-600 dark:text-yellow-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    <span><strong>Dica:</strong> Os professores podem demorar para lan√ßar as faltas no sistema. Mantenha seu controle pessoal!</span>
                </div>

                <div class="space-y-6">
                    <!-- Seletor de Aulas por Semana -->
                    <div>
                        <label class="block text-sm font-bold text-gray-700 dark:text-gray-200 mb-2 flex items-center"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1 text-gray-500 dark:text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" /></svg>Aulas por Semana da Disciplina:</label>
                        <div class="flex flex-col sm:flex-row gap-3 sm:gap-4">
                            <label class="w-full sm:flex-1 cursor-pointer">
                                <input type="radio" name="aulas-semana" value="1" class="peer sr-only" checked>
                                <div class="text-center py-3 px-4 rounded-md border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-500 dark:text-gray-400 font-bold peer-checked:border-red-600 dark:peer-checked:border-red-500 peer-checked:text-red-600 dark:peer-checked:text-red-400 peer-checked:bg-red-50 dark:peer-checked:bg-red-900/30 transition-all shadow-sm hover:border-gray-300 dark:hover:border-gray-500">
                                    1 Aula/Semana
                                    <span class="block text-xs font-normal mt-1">(Total: 40h)</span>
                                </div>
                            </label>
                            <label class="w-full sm:flex-1 cursor-pointer">
                                <input type="radio" name="aulas-semana" value="2" class="peer sr-only">
                                <div class="text-center py-3 px-4 rounded-md border-2 border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-500 dark:text-gray-400 font-bold peer-checked:border-red-600 dark:peer-checked:border-red-500 peer-checked:text-red-600 dark:peer-checked:text-red-400 peer-checked:bg-red-50 dark:peer-checked:bg-red-900/30 transition-all shadow-sm hover:border-gray-300 dark:hover:border-gray-500">
                                    2 Aulas/Semana
                                    <span class="block text-xs font-normal mt-1">(Total: 80h)</span>
                                </div>
                            </label>
                        </div>

                        <!-- Legenda Din√¢mica de Tempos -->
                        <div id="tempos-legend" class="text-xs text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-700 p-3 rounded border border-gray-200 dark:border-gray-600 mt-2">
                            <!-- O conte√∫do ser√° inserido via JavaScript -->
                        </div>
                    </div>

                    <!-- Input de Faltas Atuais -->
                    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0 p-3 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md shadow-sm hover:border-red-300 dark:hover:border-red-500 transition-colors">
                        <label for="input-faltas" class="text-base font-bold text-gray-700 dark:text-gray-200 flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-gray-400 dark:text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                            Suas Faltas Atuais (n¬∫ de tempos):
                        </label>
                        <input type="number" id="input-faltas" min="0" class="w-full sm:w-24 text-center text-lg font-bold py-2 sm:py-1 px-3 sm:px-2 rounded border border-gray-300 dark:border-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500 transition-all bg-white dark:bg-gray-600 text-gray-700 dark:text-white placeholder-gray-300 dark:placeholder-gray-500" placeholder="0">
                    </div>

                    <!-- Resultado de Faltas -->
                    <div id="faltas-result-card" class="hidden mt-6 p-4 rounded-md shadow-sm border-l-4 transition-all duration-300 card-enter">
                        <h3 class="font-bold text-lg mb-2 flex items-center" id="faltas-result-title"></h3>
                        <p id="faltas-result-message" class="text-sm font-medium"></p>
                        <div class="mt-3 text-xs font-medium flex items-center">
                            <span id="faltas-presenca-badge" class="px-2 py-1 rounded-full border"></span>
                        </div>
                    </div>

                </div>
            </div>
        </div>

    </div>

    <!-- Footer -->
    <footer class="py-6 text-center w-full bg-white dark:bg-gray-800 shadow-inner dark:shadow-gray-900/50 border-t border-gray-200 dark:border-gray-700">
        <div class="max-w-2xl mx-auto px-4">
            <!-- Cr√©ditos -->
            <p class="text-gray-500 dark:text-gray-400 text-sm font-medium">
                Criado por Felipe
            </p>
            <p class="text-xs text-gray-400 dark:text-gray-500 mt-1">
                CCO Noturno UNIRP - 2025
            </p>

            <!-- Divisor -->
            <div class="my-4 border-t border-gray-200 dark:border-gray-700"></div>

            <!-- Reportar Bug -->
            <div class="flex flex-col sm:flex-row items-center justify-center gap-2 sm:gap-3">
                <span class="text-xs text-gray-500 dark:text-gray-400">
                    Encontrou algum erro?
                </span>
                <a href="mailto:20224254@unirp.com.br?subject=Bug%20no%20Guia%20do%20Aluno&body=Oi%2C%20encontrei%20um%20erro%3A%0A%0A"
                   class="inline-flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700
                          text-white text-sm font-medium rounded-full transition-colors
                          shadow-sm hover:shadow-md">
                    <!-- Email SVG Icon -->
                    <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                    </svg>
                    Reportar por Email
                </a>
            </div>
        </div>
    </footer>

    <script>
        // --- Dark Mode Logic ---
        const darkModeToggle = document.getElementById('dark-mode-toggle');
        const htmlElement = document.documentElement;

        // Verificar prefer√™ncia salva ou do sistema
        function initDarkMode() {
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

            if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
                htmlElement.classList.add('dark');
            } else {
                htmlElement.classList.remove('dark');
            }
        }

        // Toggle dark mode
        function toggleDarkMode() {
            if (htmlElement.classList.contains('dark')) {
                htmlElement.classList.remove('dark');
                localStorage.setItem('theme', 'light');
            } else {
                htmlElement.classList.add('dark');
                localStorage.setItem('theme', 'dark');
            }
        }

        // Event listener
        darkModeToggle.addEventListener('click', toggleDarkMode);

        // Inicializar ao carregar
        initDarkMode();

        // Ouvir mudan√ßas na prefer√™ncia do sistema
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
            if (!localStorage.getItem('theme')) {
                if (e.matches) htmlElement.classList.add('dark');
                else htmlElement.classList.remove('dark');
            }
        });

        // --- Configura√ß√µes Globais ---
        const TARGET_MEDIA = 6.51;
        
        // Carga Hor√°ria e Faltas
        const AULAS_TOTAL_1 = 40; // 1 Aula/Semana (40h)
        const AULAS_TOTAL_2 = 80; // 2 Aulas/Semana (80h)
        
        // Fator de faltas por DIA de aula
        // 1 Aula/Semana: geralmente 2 tempos (19:00 e 19:50) -> 2 faltas se faltar o dia todo
        const FALTAS_POR_DIA_1 = 2;
        // 2 Aulas/Semana: geralmente 4 tempos -> 4 faltas se faltar o dia todo
        const FALTAS_POR_DIA_2 = 4;

        const LIMITE_FALTAS_PCT = 0.25; // 25%

        // --- Elementos do DOM (Notas) ---
        const tabNotasBtn = document.getElementById('tab-notas');
        const contentNotas = document.getElementById('content-notas');
        const gradeInputs = Array.from(document.querySelectorAll('.grade-input'));
        const displayTotal = document.getElementById('display-total');
        const mediaStatusMessage = document.getElementById('media-status-message');
        const gradeHint = document.getElementById('grade-hint');
        const recuperacaoInfo = document.getElementById('recuperacao-info');
        const notaSub = document.getElementById('nota-sub');
        const tipoNotaSub = document.getElementById('tipo-nota-sub');
        const notaExame = document.getElementById('nota-exame');
        const confettiContainer = document.getElementById('confetti-container');

        // --- Elementos do DOM (Faltas) ---
        const tabFaltasBtn = document.getElementById('tab-faltas');
        const contentFaltas = document.getElementById('content-faltas');
        const aulasSemanaRadios = document.getElementsByName('aulas-semana');
        const inputFaltas = document.getElementById('input-faltas');
        const faltasResultCard = document.getElementById('faltas-result-card');
        const faltasResultTitle = document.getElementById('faltas-result-title');
        const faltasResultMessage = document.getElementById('faltas-result-message');
        const faltasPresencaBadge = document.getElementById('faltas-presenca-badge');
        const temposLegend = document.getElementById('tempos-legend');

        // --- Fun√ß√µes Utilit√°rias ---
        function toggleConfetti(show) {
            if (show) confettiContainer.classList.add('active');
            else confettiContainer.classList.remove('active');
        }

        function switchTab(tabName) {
            if (tabName === 'notas') {
                tabNotasBtn.classList.add('bg-gray-50', 'dark:bg-gray-700', 'border-red-600', 'dark:border-red-500', 'text-gray-700', 'dark:text-gray-200');
                tabNotasBtn.classList.remove('text-gray-500', 'dark:text-gray-400', 'border-transparent');
                tabFaltasBtn.classList.remove('bg-gray-50', 'dark:bg-gray-700', 'border-red-600', 'dark:border-red-500', 'text-gray-700', 'dark:text-gray-200');
                tabFaltasBtn.classList.add('text-gray-500', 'dark:text-gray-400', 'border-transparent');
                contentNotas.classList.add('active');
                contentFaltas.classList.remove('active');
            } else {
                tabFaltasBtn.classList.add('bg-gray-50', 'dark:bg-gray-700', 'border-red-600', 'dark:border-red-500', 'text-gray-700', 'dark:text-gray-200');
                tabFaltasBtn.classList.remove('text-gray-500', 'dark:text-gray-400', 'border-transparent');
                tabNotasBtn.classList.remove('bg-gray-50', 'dark:bg-gray-700', 'border-red-600', 'dark:border-red-500', 'text-gray-700', 'dark:text-gray-200');
                tabNotasBtn.classList.add('text-gray-500', 'dark:text-gray-400', 'border-transparent');
                contentFaltas.classList.add('active');
                contentNotas.classList.remove('active');
            }
        }

        // --- L√≥gica de Notas ---
        function calculateGrades() {
            let currentTotalScore = 0;
            let remainingWeight = 0;
            let accumulatedPoints = 0;
            let emptyInputs = [];
            let allFilled = true;

            // Vari√°veis para a l√≥gica da SUB (apenas Intermedi√°ria e Semestral)
            let minSubGradeVal = Infinity;
            let minSubGradeInput = null;
            const substitutableInputs = [document.getElementById('input-inter'), document.getElementById('input-semes')];

            // 1. Calcular Pontos e Identificar Campos
            gradeInputs.forEach(input => {
                const weight = parseFloat(input.dataset.weight);
                const val = input.value;
                
                if (val !== '') {
                    input.classList.remove('bg-white', 'dark:bg-gray-600', 'text-gray-400', 'dark:text-gray-300', 'border-gray-300', 'dark:border-gray-500', 'placeholder-gray-300', 'dark:placeholder-gray-500', 'border-dashed');
                    input.classList.add('bg-red-600', 'text-white', 'border-red-700', 'shadow-sm');

                    const numVal = parseFloat(val);
                    currentTotalScore += (numVal * weight);
                    accumulatedPoints += (numVal * weight);

                } else {
                    input.classList.add('bg-white', 'dark:bg-gray-600', 'text-gray-400', 'dark:text-gray-300', 'border-gray-300', 'dark:border-gray-500', 'placeholder-gray-300', 'dark:placeholder-gray-500', 'border-dashed');
                    input.classList.remove('bg-red-600', 'text-white', 'border-red-700', 'shadow-sm');

                    emptyInputs.push(input);
                    remainingWeight += weight;
                    allFilled = false;
                }
            });

            // L√≥gica separada para encontrar a menor nota entre as substitu√≠veis
            substitutableInputs.forEach(input => {
                const val = input.value;
                if (val !== '') {
                    const numVal = parseFloat(val);
                    if (numVal < minSubGradeVal) {
                        minSubGradeVal = numVal;
                        minSubGradeInput = input;
                    }
                }
            });

            // 2. M√©dia Atual e Estiliza√ß√£o
            const finalAverageStr = (currentTotalScore / 10).toFixed(2);
            const finalAverage = parseFloat(finalAverageStr);
            displayTotal.innerText = finalAverageStr;

            displayTotal.className = "w-28 text-center text-2xl font-bold py-2 px-2 rounded-md border shadow-sm transition-all duration-300";
            mediaStatusMessage.classList.add('hidden');
            mediaStatusMessage.className = "mt-4 p-3 rounded-md text-sm font-bold text-center hidden card-enter";
            recuperacaoInfo.classList.add('hidden');
            gradeHint.classList.remove('hidden');
            toggleConfetti(false);

            if (finalAverage >= 7.0) {
                displayTotal.classList.add('bg-green-600', 'text-white', 'border-green-700');
                mediaStatusMessage.innerText = "üéâ Parab√©ns! Passou tranquilo!";
                mediaStatusMessage.classList.add('bg-green-100', 'text-green-800', 'border', 'border-green-200');
                mediaStatusMessage.classList.remove('hidden');
                gradeHint.classList.add('hidden');
                toggleConfetti(true);
            } else if (finalAverage >= TARGET_MEDIA) {
                displayTotal.classList.add('bg-yellow-500', 'text-white', 'border-yellow-600');
                mediaStatusMessage.innerHTML = "‚ö†Ô∏è Aten√ß√£o! Passou na risca!";
                mediaStatusMessage.classList.add('bg-yellow-100', 'text-yellow-800', 'border', 'border-yellow-200');
                mediaStatusMessage.classList.remove('hidden');
                gradeHint.classList.add('hidden');
            } else if (finalAverage > 0) {
                displayTotal.classList.add('bg-red-500', 'text-white', 'border-red-600');
            } else {
                displayTotal.classList.add('bg-gray-200', 'text-gray-500', 'border-gray-300');
            }

            // 3. L√≥gica "Fantasma" e Recupera√ß√£o
            if (!allFilled) {
                const targetPoints = TARGET_MEDIA * 10;
                const pointsNeeded = targetPoints - accumulatedPoints;
                
                if (remainingWeight > 0) {
                    const gradeNeeded = pointsNeeded / remainingWeight;
                    
                    emptyInputs.forEach(input => {
                        if (gradeNeeded <= 0) {
                            input.placeholder = "0.00";
                        } else if (gradeNeeded > 10) {
                            input.placeholder = "Imp.";
                        } else {
                            input.placeholder = gradeNeeded.toFixed(2);
                        }
                    });
                }
            } else {
                gradeInputs.forEach(i => i.placeholder = "");
                gradeHint.classList.add('hidden');
                // Se tudo preenchido e m√©dia abaixo da meta, mostra recupera√ß√£o
                if (finalAverage < TARGET_MEDIA) {
                    recuperacaoInfo.classList.remove('hidden');
                    
                    // C√°lculo SUB
                    if (minSubGradeInput) {
                        const minWeight = parseFloat(minSubGradeInput.dataset.weight);
                        const otherPoints = accumulatedPoints - (minSubGradeVal * minWeight);
                        const pointsForSub = (TARGET_MEDIA * 10) - otherPoints;
                        let rawGradeForSub = pointsForSub / minWeight;
                        
                        // Arredondamento para cima em m√∫ltiplos de 0.25 (1.03 -> 1.25)
                        let gradeForSub = Math.ceil(rawGradeForSub * 4) / 4;
                        if (gradeForSub < 0) gradeForSub = 0;
                        
                        notaSub.innerText = gradeForSub > 10 ? "Imposs√≠vel" : gradeForSub.toFixed(2);

                        // Limpar o nome da prova (remover o texto do peso)
                        let labelText = minSubGradeInput.previousElementSibling.innerText;
                        labelText = labelText.replace(/\(peso:.*\)/i, '').trim();
                        tipoNotaSub.innerText = labelText.toLowerCase();
                    } else {
                        notaSub.innerText = "---";
                        tipoNotaSub.innerText = "---";
                    }

                    // C√°lculo EXAME
                    const gradeForExame = 10 - finalAverage;
                    notaExame.innerText = gradeForExame.toFixed(2);
                }
            }
        }

        // --- L√≥gica de Faltas ---
        function calculateFaltas() {
            const opcaoSelecionada = parseInt(document.querySelector('input[name="aulas-semana"]:checked').value);
            const faltasAtuaisStr = inputFaltas.value;
            const faltasAtuais = faltasAtuaisStr === '' ? 0 : parseInt(faltasAtuaisStr);

            // --- ATUALIZA A LEGENDA ---
            if (opcaoSelecionada === 1) {
                temposLegend.innerHTML = `
                    <p class="font-bold mb-1">üìå 1 Aula por Semana:</p>
                    <p><strong>1 dia = 2 tempos</strong> (ou 2 "aulas" no sistema).</p>
                    <p class="mt-1 border-t border-gray-200 pt-1 italic">Cada dia que voc√™ vai √† faculdade conta como 2 tempos de presen√ßa. Faltar 1 dia = 2 faltas.</p>
                `;
            } else {
                temposLegend.innerHTML = `
                    <p class="font-bold mb-1">üìå 2 Aulas por Semana:</p>
                    <p><strong>1 dia = 4 tempos</strong> (se for no mesmo dia) ou <strong>2 tempos</strong> (se dias separados).</p>
                    <p class="mt-1 border-t border-gray-200 pt-1 italic"><strong>Regra de Ouro:</strong> 16 tempos = 4 dias letivos completos ou 8 aulas (dias/turnos) individuais.</p>
                `;
            }

            if (faltasAtuaisStr === '') {
                faltasResultCard.classList.add('hidden');
                toggleConfetti(false);
                return;
            }

            // Defini√ß√£o das constantes
            const totalAulas = opcaoSelecionada === 1 ? AULAS_TOTAL_1 : AULAS_TOTAL_2;
            const faltasPorDia = opcaoSelecionada === 1 ? FALTAS_POR_DIA_1 : FALTAS_POR_DIA_2;
            
            const limiteFaltas = Math.floor(totalAulas * LIMITE_FALTAS_PCT);
            const faltasRestantes = limiteFaltas - faltasAtuais;
            const presencaPct = ((totalAulas - faltasAtuais) / totalAulas) * 100;

            // --- C√ÅLCULO DE DIAS RESTANTES ---
            let diasRestantesCheios; 
            let diasRestantesDivididos; 
            let diasRestantesUnicos; 

            if (opcaoSelecionada === 1) {
                diasRestantesUnicos = Math.floor(faltasRestantes / 2);
            } else {
                diasRestantesCheios = Math.floor(faltasRestantes / 4); 
                diasRestantesDivididos = Math.floor(faltasRestantes / 2);
            }

            const jaEstourou = faltasAtuais > limiteFaltas;
            const estaNoLimiteExato = faltasAtuais === limiteFaltas;
            
            // Verifica se a pr√≥xima falta "padr√£o" faz estourar o limite
            const reprovaNaProxima = (faltasAtuais + faltasPorDia) > limiteFaltas;
            const limiteNaProxima = (faltasAtuais + faltasPorDia) === limiteFaltas;

            faltasResultCard.classList.remove('hidden');
            faltasResultCard.className = "mt-6 p-4 rounded-md shadow-sm border-l-4 transition-all duration-300 card-enter";
            faltasResultTitle.className = "font-bold text-lg mb-2 flex items-center";
            faltasPresencaBadge.className = "px-2 py-1 rounded-full border text-xs font-bold";
            toggleConfetti(false);

            if (jaEstourou) {
                // Vermelho - Reprovado
                faltasResultCard.classList.add('bg-red-50', 'dark:bg-red-900/30', 'border-red-600', 'dark:border-red-500');
                faltasResultTitle.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-red-600 dark:text-red-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>Limite Excedido';
                faltasResultTitle.classList.add('text-red-800', 'dark:text-red-200');
                faltasResultMessage.innerHTML = `Voc√™ ultrapassou o limite de ${limiteFaltas} faltas. Sua presen√ßa est√° abaixo de 75%.`;
                faltasResultMessage.classList.add('dark:text-red-300');
                faltasPresencaBadge.classList.add('bg-red-100', 'dark:bg-red-900/50', 'text-red-800', 'dark:text-red-200', 'border-red-200', 'dark:border-red-700');

            } else if (estaNoLimiteExato || reprovaNaProxima) {
                // Laranja - Limite exato OU Pr√≥xima falta reprova (caso 9 faltas no modo 1 aula)
                faltasResultCard.classList.add('bg-orange-50', 'dark:bg-orange-900/30', 'border-orange-500', 'dark:border-orange-400');
                faltasResultTitle.classList.add('text-orange-800', 'dark:text-orange-200');
                faltasResultMessage.classList.add('dark:text-orange-300');
                faltasPresencaBadge.classList.add('bg-orange-100', 'dark:bg-orange-900/50', 'text-orange-800', 'dark:text-orange-200', 'border-orange-200', 'dark:border-orange-700');

                if (estaNoLimiteExato) {
                    faltasResultTitle.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-orange-600 dark:text-orange-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" /></svg>Voc√™ est√° no Limite (75%)';
                    faltasResultMessage.innerText = `Cuidado! Voc√™ tem exatamente 75% de presen√ßa. Se faltar qualquer aula, ser√° reprovado.`;
                } else {
                    // Caso cr√≠tico (ex: 9 faltas onde limite √© 10 e pr√≥xima falta √© 2)
                    faltasResultTitle.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-orange-600 dark:text-orange-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" /></svg>Voc√™ est√° no Limite (${presencaPct.toFixed(1)}%)`;
                    faltasResultMessage.innerText = `Cuidado! Voc√™ tem exatamente ${presencaPct.toFixed(1).replace('.', ',')}% de presen√ßa. Se faltar qualquer aula, ser√° reprovado (pois ela desconta ${faltasPorDia} tempos).`;
                }

            } else if (limiteNaProxima) {
                // Amarelo - Pr√≥xima falta atinge o limite (exatamente)
                faltasResultCard.classList.add('bg-yellow-50', 'dark:bg-yellow-900/30', 'border-yellow-600', 'dark:border-yellow-500');
                faltasResultTitle.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-yellow-600 dark:text-yellow-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" /></svg>Aten√ß√£o: Risco Alto';
                faltasResultTitle.classList.add('text-yellow-800', 'dark:text-yellow-200');
                faltasResultMessage.innerText = `ATEN√á√ÉO: Se voc√™ faltar a pr√≥xima aula, atingir√° EXATAMENTE o limite de 75%. N√£o corra riscos!`;
                faltasResultMessage.classList.add('dark:text-yellow-300');
                faltasPresencaBadge.classList.add('bg-yellow-100', 'dark:bg-yellow-900/50', 'text-yellow-800', 'dark:text-yellow-200', 'border-yellow-200', 'dark:border-yellow-700');

            } else {
                // L√ìGICA DE AVISOS INTERMEDI√ÅRIOS (Verde ou Amarelo leve)
                
                // 1. Caso 1 Aula/Semana
                if (opcaoSelecionada === 1) {
                    if (diasRestantesUnicos <= 2) {
                        // Amarelo - Restam 1 ou 2 dias "seguros" antes da zona de risco
                        faltasResultCard.classList.add('bg-yellow-50', 'dark:bg-yellow-900/30', 'border-yellow-600', 'dark:border-yellow-500');
                        faltasResultTitle.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-yellow-600 dark:text-yellow-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" /></svg>Aten√ß√£o';
                        faltasResultTitle.classList.add('text-yellow-800', 'dark:text-yellow-200');
                        faltasResultMessage.innerText = `Voc√™ pode faltar mais ${diasRestantesUnicos} dia(s) de aula. √â bom guardar essas faltas para quando realmente precisar.`;
                        faltasResultMessage.classList.add('dark:text-yellow-300');
                        faltasPresencaBadge.classList.add('bg-yellow-100', 'dark:bg-yellow-900/50', 'text-yellow-800', 'dark:text-yellow-200', 'border-yellow-200', 'dark:border-yellow-700');
                    } else {
                        // Verde
                        faltasResultCard.classList.add('bg-green-50', 'dark:bg-green-900/30', 'border-green-600', 'dark:border-green-500');
                        faltasResultTitle.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-green-600 dark:text-green-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>Situa√ß√£o Confort√°vel';
                        faltasResultTitle.classList.add('text-green-800', 'dark:text-green-200');
                        faltasResultMessage.innerText = `Voc√™ pode faltar mais ${diasRestantesUnicos} dias de aula para atingir o limite de 75% de presen√ßa.`;
                        faltasResultMessage.classList.add('dark:text-green-300');
                        faltasPresencaBadge.classList.add('bg-green-100', 'dark:bg-green-900/50', 'text-green-800', 'dark:text-green-200', 'border-green-200', 'dark:border-green-700');
                        toggleConfetti(true);
                    }
                }
                // 2. Caso 2 Aulas/Semana
                else {
                    // Amarelo se faltar pouco
                    if (diasRestantesCheios <= 2) {
                        faltasResultCard.classList.add('bg-yellow-50', 'dark:bg-yellow-900/30', 'border-yellow-600', 'dark:border-yellow-500');
                        faltasResultTitle.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-yellow-600 dark:text-yellow-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" /></svg>Aten√ß√£o';
                        faltasResultTitle.classList.add('text-yellow-800', 'dark:text-yellow-200');

                        let msg = `Voc√™ pode faltar mais ${diasRestantesCheios} dias cheios (ou ${diasRestantesDivididos} dias separados). √â bom guardar essas faltas.`;
                        if (diasRestantesCheios === 0 && diasRestantesDivididos > 0) {
                             msg = `<strong>N√£o falte mais se as 4 aulas forem no mesmo dia</strong> (exceder√° o limite).<br>Se forem divididas, voc√™ ainda pode faltar ${diasRestantesDivididos} dia(s) (2 tempos).`;
                        }
                        faltasResultMessage.innerHTML = msg;
                        faltasResultMessage.classList.add('dark:text-yellow-300');
                        faltasPresencaBadge.classList.add('bg-yellow-100', 'dark:bg-yellow-900/50', 'text-yellow-800', 'dark:text-yellow-200', 'border-yellow-200', 'dark:border-yellow-700');

                    } else {
                        // Verde
                        faltasResultCard.classList.add('bg-green-50', 'dark:bg-green-900/30', 'border-green-600', 'dark:border-green-500');
                        faltasResultTitle.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-green-600 dark:text-green-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>Situa√ß√£o Confort√°vel';
                        faltasResultTitle.classList.add('text-green-800', 'dark:text-green-200');
                        faltasResultMessage.innerText = `Voc√™ pode faltar mais ${diasRestantesCheios} dias (se aulas no mesmo dia) ou ${diasRestantesDivididos} dias (se aulas em dias diferentes).`;
                        faltasResultMessage.classList.add('dark:text-green-300');
                        faltasPresencaBadge.classList.add('bg-green-100', 'dark:bg-green-900/50', 'text-green-800', 'dark:text-green-200', 'border-green-200', 'dark:border-green-700');
                        toggleConfetti(true);
                    }
                }
            }
            faltasPresencaBadge.innerText = `Presen√ßa Atual: ${presencaPct.toFixed(2)}%`;
        }

        // --- Event Listeners ---
        tabNotasBtn.addEventListener('click', () => {
            switchTab('notas');
            calculateGrades();
        });
        tabFaltasBtn.addEventListener('click', () => {
            switchTab('faltas');
            calculateFaltas();
        });

        gradeInputs.forEach(input => {
            input.addEventListener('input', calculateGrades);
        });

        aulasSemanaRadios.forEach(radio => {
            radio.addEventListener('change', calculateFaltas);
        });
        inputFaltas.addEventListener('input', calculateFaltas);

        calculateGrades();
        calculateFaltas(); // Chama no in√≠cio para j√° renderizar a legenda padr√£o
    </script>
</body>
</html>